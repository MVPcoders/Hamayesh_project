<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ارسال مقاله</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="/static/css/article.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body class="container mx-auto px-4 py-8 max-w-6xl">
<div class="header animate__animated animate__fadeInDown bg-white shadow-sm py-4 px-4 sm:px-6 rounded-lg mb-6">
    <div class="flex flex-col sm:flex-row justify-between items-center gap-4">
        <div class="flex flex-row-reverse sm:flex-row gap-3 w-full sm:w-auto justify-between sm:justify-start">
            <a href="/"
               class="header-btn flex items-center justify-center px-3 py-2 text-sm sm:text-base bg-blue-50 hover:bg-blue-100 text-blue-700 rounded-lg transition-colors">
                <i class="fas fa-home ml-1 sm:ml-2 "></i>
                <span class="hidden sm:inline">صفحه اصلی</span>
            </a>
            <a href="{% url 'profile' %}"
               class="header-btn flex items-center justify-center px-3 py-2 text-sm sm:text-base bg-blue-50 hover:bg-blue-100 text-blue-700 rounded-lg transition-colors">
                <i class="fas fa-user-circle ml-1 sm:ml-2"></i>
                <span class="hidden sm:inline">حساب کاربری</span>
            </a>
        </div>
        <h1 class="text-xl sm:text-2xl font-bold text-white-800 text-center sm:text-right w-full sm:w-auto">ثبت مقاله
            جدید</h1>
    </div>
</div>
<button id="sidebarToggle"
        class="lg:hidden w-full mb-4 bg-blue-600 text-white py-3 px-4 rounded-lg flex items-center justify-center">
    <i class="fas fa-info-circle ml-2"></i>
    نمایش راهنمای ارسال مقاله
</button>
<div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
    <!-- Main content (3 columns) -->
    <div class="lg:col-span-3">
        <form id="articleForm" method="post" action="{% url 'new_article' %}" enctype="multipart/form-data"
              class="form-card animate-fade-in">
            {% csrf_token %}
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="form-group">
                    <label for="articleLang" class="form-label">زبان مقاله</label>
                    <select name="articleLang" id="articleLang" class="form-input">
                        <option value="فارسی"> فارسی</option>
                        <option value="انگلیسی"> انگلیسی</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="articleMainGoal" class="form-label">محور اصلی مقاله</label>
                    <input type="text" id="articleMainGoal" name="articleMainGoal" class="form-input" required>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-6">
                <div class="form-group">
                    <label for="articlePersianTitle" class="form-label">عنوان فارسی مقاله</label>
                    <input type="text" id="articlePersianTitle" name="articlePersianTitle" class="form-input" required>
                </div>
                <div class="form-group">
                    <label for="articleEnglishTitle" class="form-label">عنوان انگلیسی مقاله</label>
                    <input type="text" id="articleEnglishTitle" name="articleEnglishTitle" class="form-input" required>
                </div>
            </div>

            <div class="form-group mt-6">
                <label for="articleAbstract" class="form-label">چکیده مقاله</label>
                <textarea id="articleAbstract" name="articleAbstract" class="form-input" rows="5" required></textarea>
            </div>

            <div class="form-group mt-6">
                <label class="form-label">فایل مقاله</label>
                <div class="upload-container">
                    <input type="file" id="articleFile" name="articleFile" class="upload-input" accept=".doc,.docx"
                           required>
                    <div class="upload-content" id="uploadArea">
                        <i class="fas fa-cloud-upload-alt upload-icon"></i>
                        <div class="upload-text">
                            <h4>فایل مقاله را اینجا رها کنید یا کلیک کنید</h4>
                            <p>فرمت قابل قبول: Word (حداکثر 5MB)</p>
                        </div>
                        <div class="progress-bar" id="progressBar"></div>
                    </div>
                    <div class="file-info" id="fileInfo">
                        <i class="fas fa-file-alt"></i>
                        <span id="fileName"></span>
                    </div>
                    <div class="upload-success" id="uploadSuccess">
                        <i class="fas fa-check-circle"></i> فایل با موفقیت آپلود شد
                    </div>
                </div>
            </div>

            <div class="form-card animate-fade-in mt-6 bg-blue-50 border-blue-200">
                <div class="form-group">
                    <label for="authorCount" class="form-label text-blue-700">تعداد نویسندگان مقاله</label>
                    <input type="number" id="authorCount" name="authorCount" class="form-input bg-white" min="1" max="4"
                           value="1" onchange="updateAuthorForms()">
                    <p class="text-blue-600 text-sm mt-2">لطفاً تعداد نویسندگان مقاله را وارد نمایید (حداکثر 4
                        نویسنده)</p>
                </div>
            </div>

            <h3 class="font-bold text-lg mb-4 text-blue-800 mt-8 flex items-center">
                <i class="fas fa-users ml-2"></i>
                اطلاعات نویسندگان
            </h3>

            <div id="authorsContainer" class="authors-container animate-fade-in">
                <!-- Author forms will be dynamically added here -->
            </div>

            <div class="flex justify-end mt-8">
                <button type="submit" id="submitButton" class="btn btn-primary flex items-center">
                    <i class="fas fa-paper-plane ml-2"></i>
                    ارسال مقاله
                </button>
                <div id="loadingMessage" class="hidden items-center bg-blue-100 text-blue-800 px-4 py-2 rounded-lg">
                    <i class="fas fa-spinner fa-spin ml-2"></i>
                    در حال ارسال مقاله...
                </div>
            </div>
        </form>
    </div>

    <!-- Sidebar (1 column) -->
    <div class="lg:col-span-1">
        <!-- مودال و محتوای سایدبار -->
        <div class="hidden fixed inset-0 z-50 overflow-y-auto" id="sidebarModal">
            <div class="flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
                <!-- پس زمینه تاریک -->
                <div class="fixed inset-0 transition-opacity" aria-hidden="true">
                    <div class="absolute inset-0 bg-gray-500 opacity-75"></div>
                </div>

                <!-- محتوای مودال -->
                <div class="inline-block align-bottom bg-white rounded-lg text-right overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full w-full"
                     role="dialog" aria-modal="true" aria-labelledby="modal-headline">
                    <div class="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
                        <div class="sm:flex sm:items-start">
                            <div class="mt-3 text-center sm:mt-0 sm:text-right w-full">
                                <div class="sidebar-card">
                                    <div class="flex justify-between items-center mb-4">
                                        <h3 class="font-bold text-lg text-blue-800 flex items-center">
                                            <i class="fas fa-info-circle ml-2"></i>
                                            راهنمای ارسال مقاله
                                        </h3>
                                        <button id="closeModal" class="text-gray-500 hover:text-gray-700">
                                            <i class="fas fa-times text-xl"></i>
                                        </button>
                                    </div>
                                    <div class="text-gray-700 mb-6">
                                        <p class="mb-4" style="font-weight: bold">لطفاً قبل از ارسال مقاله موارد زیر را
                                            بررسی نمایید:</p>
                                        <ul class="list-disc pr-4 space-y-2">
                                            <li>فایل راهنمای ثبت مقاله را ازقسمت پایین دانلود کنید و مقاله خود را با
                                                قالب آن تنظیم کنید
                                            </li>
                                            <li>در صورت عدم تطابق قالب مقاله شما با فایل راهنما ، مقاله شما پذیرفته نمی
                                                شود
                                            </li>
                                            <li>فایل مقاله باید با فرمت Word باشد</li>
                                            <li>حداکثر حجم فایل 5 مگابایت باشد</li>
                                            <li>اطلاعات نویسندگان را به دقت وارد نمایید</li>
                                        </ul>
                                    </div>

                                    <div class="mt-6 pt-4 border-t border-gray-200">
                                        <h4 class="font-bold mb-3 text-blue-700">فایل راهنمای ثبت مقاله</h4>
                                        <p class="text-sm text-gray-600 mb-4">برای آشنایی با فرمت مورد نظر می‌توانید
                                            فایل راهنما را دانلود کنید:</p>
                                        <a href="/static/files/sample-article.docx" class="download-btn">
                                            <i class="fas fa-download ml-2"></i>
                                            دانلود فایل راهنما
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- سایدبار اصلی (فقط در دسکتاپ) -->
        <div class="hidden lg:block sidebar-card animate__animated animate__fadeInRight sticky top-8">
            <h3 class="font-bold text-lg mb-4 text-blue-800 flex items-center">
                <i class="fas fa-info-circle ml-2"></i>
                راهنمای ارسال مقاله
            </h3>
            <div class="text-gray-700 mb-6">
                <p class="mb-4" style="font-weight: bold">لطفاً قبل از ارسال مقاله موارد زیر را بررسی نمایید:</p>
                <ul class="list-disc pr-4 space-y-2">
                    <li>فایل راهنمای ثبت مقاله را ازقسمت پایین دانلود کنید و مقاله خود را با قالب آن تنظیم کنید</li>
                    <li>در صورت عدم تطابق قالب مقاله شما با فایل راهنما ، مقاله شما پذیرفته نمی شود</li>
                    <li>فایل مقاله باید با فرمت Word باشد</li>
                    <li>حداکثر حجم فایل 5 مگابایت باشد</li>
                    <li>اطلاعات نویسندگان را به دقت وارد نمایید</li>
                </ul>
            </div>

            <div class="mt-6 pt-4 border-t border-gray-200">
                <h4 class="font-bold mb-3 text-blue-700">فایل راهنمای ثبت مقاله</h4>
                <p class="text-sm text-gray-600 mb-4">برای آشنایی با فرمت مورد نظر می‌توانید فایل راهنما را دانلود
                    کنید:</p>
                <a href="/static/files/sample-article.docx" class="download-btn">
                    <i class="fas fa-download ml-2"></i>
                    دانلود فایل راهنما
                </a>
            </div>
        </div>
    </div>
</div>
</body>
<script src="/static/js/article.js"></script>
</html>